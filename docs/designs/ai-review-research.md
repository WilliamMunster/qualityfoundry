# AI è¯„å®¡ç³»ç»Ÿé¢„ç ”æ–‡æ¡£

**çŠ¶æ€**: é¢„ç ”é˜¶æ®µ (ä¸å®ç°)  
**ä¼˜å…ˆçº§**: P2  
**ä½œè€…**: Kimi (å¼€å‘å·¥ç¨‹å¸ˆ)  
**æ—¥æœŸ**: 2026-01-31  
**ä¾èµ–**: æ— ï¼ˆçº¯é¢„ç ”æ–‡æ¡£ï¼‰

---

## æ¦‚è¿°

æœ¬æ–‡æ¡£è°ƒç ” **æ··åˆè´¨é‡è¯„ä¼°ä½“ç³»** ä¸­çš„ AI è¯„å®¡èƒ½åŠ›ï¼Œä½œä¸º QualityFoundry L5  governance å±‚çš„æ½œåœ¨å¢å¼ºæ–¹å‘ã€‚

### èƒŒæ™¯

å½“å‰ QualityFoundry è´¨é‡è¯„ä¼°ä¸»è¦ä¾èµ–ï¼š
- âœ… **ç¡®å®šæ€§æ£€æŸ¥**: pytestã€Playwrightã€é™æ€åˆ†æï¼ˆå·²å®Œæˆï¼‰
- ğŸŸ¡ **AI è¾…åŠ©è¯„å®¡**: å¤šæ¨¡å‹å¯¹æ¯”ã€ä¸»è§‚è¯„ä¼°ï¼ˆå¾…æ¢ç´¢ï¼‰

> æ ¹æ® `progress_baseline.md`ï¼Œ"æ··åˆè´¨é‡"è¢«æ ‡è®°ä¸º ğŸŸ¡ï¼Œæ ¸å¿ƒç¼ºå£åœ¨äº AI è¯„å®¡/å¤šæ¨¡å‹è¯„ä¼°ä½“ç³»ã€‚

---

## 1. ç°æœ‰æ–¹æ¡ˆè°ƒç ”

### 1.1 å¤šæ¨¡å‹è¯„å®¡ (Multi-Model Review)

| æ–¹æ¡ˆ | æè¿° | é€‚ç”¨åœºæ™¯ |
|------|------|----------|
| **Majority Voting** | å¤šæ¨¡å‹ç‹¬ç«‹è¯„å®¡ï¼Œå–å¤šæ•°æ„è§ | é«˜é£é™©å†³ç­–ã€éœ€è¦å…±è¯† |
| **Weighted Ensemble** | æŒ‰æ¨¡å‹å†å²å‡†ç¡®ç‡åŠ æƒæŠ•ç¥¨ | æ¨¡å‹èƒ½åŠ›å·®å¼‚æ˜æ˜¾ |
| **Cascading Review** | è½»é‡æ¨¡å‹åˆç­›ï¼Œå¼ºæ¨¡å‹å¤å®¡ | æˆæœ¬æ•æ„Ÿåœºæ™¯ |
| **Red Teaming** | ä¸“é—¨æ¨¡å‹è´Ÿè´£è´¨ç–‘å’ŒæŒ‘æˆ˜ | å®‰å…¨å…³é”®è¯„ä¼° |

**å¼€æºå‚è€ƒ**:
- [Chatbot Arena](https://chat.lmsys.org/) - æ¨¡å‹å¯¹æˆ˜è¯„ä¼°
- [AlpacaEval](https://github.com/tatsu-lab/alpaca_eval) - è‡ªåŠ¨åŒ–æŒ‡ä»¤è·Ÿéšè¯„ä¼°

### 1.2 ä¸»è§‚è¯„ä¼°ç»´åº¦

| ç»´åº¦ | æè¿° | è¯„ä¼°æ–¹å¼ |
|------|------|----------|
| ** correctness** | é€»è¾‘æ­£ç¡®æ€§ | å¯¹æ¯”é»„é‡‘æ•°æ®é›† |
| **Completeness** | è¦†ç›–å®Œæ•´åº¦ | éœ€æ±‚è¿½æº¯çŸ©é˜µ |
| **Clarity** | è¡¨è¾¾æ¸…æ™°åº¦ | å¯è¯»æ€§è¯„åˆ† |
| **Safety** | å®‰å…¨æ€§/æœ‰å®³æ€§ | çº¢é˜Ÿæµ‹è¯• |
| **Style** | é£æ ¼ä¸€è‡´æ€§ | è§„åˆ™æ¨¡æ¿åŒ¹é… |

### 1.3 ç°æœ‰å·¥å…·é“¾

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  æ¨¡å‹å±‚: GPT-4 / Claude / Gemini / æœ¬åœ°æ¨¡å‹ (vLLM)        â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  è¯„å®¡åè®®:                                               â”‚
â”‚    - Single Pass: å•æ¬¡è¯„å®¡                               â”‚
â”‚    - Debate: æ¨¡å‹é—´è¾©è®º                                  â”‚
â”‚    - Human-in-the-Loop: äººå·¥æœ€ç»ˆè£å†³                     â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  è¯„ä¼°æŒ‡æ ‡:                                               â”‚
â”‚    - Win Rate / ELO Score                               â”‚
â”‚    - Consistency Score (åŒä¸€æ ·æœ¬å¤šæ¬¡è¯„å®¡ä¸€è‡´æ€§)          â”‚
â”‚    - Calibration Error (ç½®ä¿¡åº¦æ ¡å‡†è¯¯å·®)                  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## 2. ä¸ QualityFoundry æ¶æ„é›†æˆç‚¹

### 2.1 æ¶æ„ä½ç½®

AI è¯„å®¡ç³»ç»Ÿä½äº **L5 Governance å±‚**ï¼Œä½œä¸ºç°æœ‰è¯„ä¼°èƒ½åŠ›çš„è¡¥å……ï¼š

```
L5 Governance Layer
â”œâ”€â”€ Golden Dataset (âœ… å·²å­˜åœ¨)
â”œâ”€â”€ Evaluation CLI (âœ… å·²å­˜åœ¨)
â”œâ”€â”€ Evidence Aggregation (âœ… å·²å­˜åœ¨)
â””â”€â”€ AI Review Engine (ğŸŸ¡ é¢„ç ”ä¸­)  â† æœ¬æ–‡æ¡£
         â”‚
         â”œâ”€â”€ Multi-Model Judge
         â”œâ”€â”€ Subjective Metrics
         â””â”€â”€ Human Review Queue
```

### 2.2 æ•°æ®æµé›†æˆ

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”     â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”     â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   Execution  â”‚â”€â”€â”€â”€â–¶â”‚  Evidence.json   â”‚â”€â”€â”€â”€â–¶â”‚  AI Review   â”‚
â”‚    Result    â”‚     â”‚  (artifact +     â”‚     â”‚   Engine     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜     â”‚   trace + repro) â”‚     â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                     â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜            â”‚
                                                      â–¼
                                             â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                                             â”‚  AI Judgment â”‚
                                             â”‚  (metadata)  â”‚
                                             â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 2.3 ä¸ç°æœ‰ç»„ä»¶çš„åä½œ

| ç°æœ‰ç»„ä»¶ | é›†æˆæ–¹å¼ |
|----------|----------|
| **Gate (ç½‘å…³)** | AI è¯„å®¡ä½œä¸ºå¯é€‰è¾“å…¥ï¼Œå½±å“ `decision: PASS/NEEDS_HITL/FAIL` |
| **Evidence** | AI è¯„å®¡ç»“æœè¿½åŠ åˆ° `evidence.json` çš„ `judgment.ai_review` å­—æ®µ |
| **Approval** | é«˜é£é™© AI è¯„å®¡ç»“æœè§¦å‘ `HITL` å®¡æ‰¹æµç¨‹ |
| **Audit Log** | è®°å½•æ¨¡å‹ç‰ˆæœ¬ã€prompt ç‰ˆæœ¬ã€æ¸©åº¦å‚æ•°ç­‰å¯å¤ç°å…ƒæ•°æ® |

---

## 3. åˆæ­¥æŠ€æœ¯æ–¹æ¡ˆå»ºè®®

### 3.1 è®¾è®¡åŸåˆ™

1. **æ¸è¿›å¢å¼º**: AI è¯„å®¡ä¸æ›¿ä»£ç°æœ‰ç¡®å®šæ€§æ£€æŸ¥ï¼Œåªä½œä¸ºè¡¥å……
2. **æˆæœ¬å¯æ§**: æ”¯æŒæœ¬åœ°æ¨¡å‹ (vLLM) é™ä½ API æˆæœ¬
3. **å¯å®¡è®¡**: æ‰€æœ‰ AI è¯„å®¡å†³ç­–å¿…é¡»å¯è¿½æº¯ï¼ˆæ¨¡å‹ç‰ˆæœ¬ã€promptã€å‚æ•°ï¼‰
4. **äººå·¥å…œåº•**: ä¿ç•™ `NEEDS_HITL` è·¯å¾„ï¼Œäººå·¥å¯è¦†ç›– AI å†³ç­–

### 3.2 æ ¸å¿ƒæ¨¡å‹

```python
# ä¼ªä»£ç  - AI è¯„å®¡é…ç½®æ¨¡å‹
class AIReviewConfig:
    enabled: bool = False
    models: List[ModelConfig]          # å¤šæ¨¡å‹é…ç½®
    strategy: StrategyType             # voting / ensemble / cascade
    hitl_threshold: float = 0.7        # ä½äºæ­¤ç½®ä¿¡åº¦è§¦å‘äººå·¥
    
class ModelConfig:
    name: str                          # "gpt-4", "claude-3", "local-qwen"
    provider: ProviderType             # openai / anthropic / vllm
    weight: float = 1.0                # ensemble æƒé‡
    temperature: float = 0.0           # ç¡®å®šæ€§ä¼˜å…ˆ

class AIReviewResult:
    verdict: VerdictType               # PASS / NEEDS_HITL / FAIL
    confidence: float                  # 0.0 - 1.0
    model_votes: Dict[str, VerdictType]  # å„æ¨¡å‹æŠ•ç¥¨æ˜ç»†
    reasoning: str                     # è¯„å®¡ç†ç”±ï¼ˆå¯è§£é‡Šæ€§ï¼‰
    metadata: AIMetadata               # æ¨¡å‹ç‰ˆæœ¬ã€prompt hash ç­‰
```

### 3.3 è¯„å®¡è§¦å‘ç‚¹

| è§¦å‘æ¡ä»¶ | è¯„å®¡ç±»å‹ | è¯´æ˜ |
|----------|----------|------|
| ä»£ç å˜æ›´ PR | Code Review | å¤šæ¨¡å‹è¯„å®¡ä»£ç è´¨é‡ |
| æµ‹è¯•ç”¨ä¾‹ç”Ÿæˆ | Quality Check | è¯„ä¼°ç”Ÿæˆç”¨ä¾‹çš„å®Œæ•´æ€§ |
| éœ€æ±‚æ–‡æ¡£ | Compliance | æ£€æŸ¥éœ€æ±‚å¯è¿½æº¯æ€§ |
| å¼‚å¸¸æ‰§è¡Œ | Post-mortem | åˆ†æå¤±è´¥åŸå›  |

### 3.4 ä¸ Policy é›†æˆ

```yaml
# policy_config.yaml æ‰©å±•
ai_review:
  enabled: true
  models:
    - name: "gpt-4"
      provider: "openai"
      weight: 1.0
    - name: "claude-3-sonnet"
      provider: "anthropic"
      weight: 1.0
  strategy: "majority_vote"
  thresholds:
    pass_confidence: 0.8
    hitl_confidence: 0.5  # < 0.5 è§¦å‘äººå·¥
  dimensions:
    - correctness
    - safety
    - clarity
```

### 3.5 å®¡è®¡å­—æ®µæ‰©å±•

```json
{
  "audit": {
    "ai_review": {
      "model_versions": {
        "gpt-4": "2024-05-13",
        "claude-3-sonnet": "20240229"
      },
      "prompt_hash": "sha256:abc123...",
      "temperature": 0.0,
      "strategy": "majority_vote",
      "raw_votes": {
        "gpt-4": "PASS",
        "claude-3-sonnet": "PASS"
      },
      "final_verdict": "PASS",
      "confidence": 0.95
    }
  }
}
```

---

## 4. é£é™©è¯„ä¼°ä¸ç¼“è§£

| é£é™© | å½±å“ | ç¼“è§£æªæ–½ |
|------|------|----------|
| **æ¨¡å‹å¹»è§‰** | é”™è¯¯é€šè¿‡ | å¤šæ¨¡å‹æŠ•ç¥¨ + äººå·¥å…œåº• |
| **æˆæœ¬çˆ†ç‚¸** | é¢„ç®—è¶…æ”¯ | æœ¬åœ°æ¨¡å‹é€‰é¡¹ + é‡‡æ ·è¯„å®¡ |
| **å»¶è¿Ÿå¢åŠ ** | æ‰§è¡Œå˜æ…¢ | å¼‚æ­¥è¯„å®¡ + ç¼“å­˜ç»“æœ |
| **å¯å¤ç°æ€§** | ç»“æœä¸ä¸€è‡´ | å›ºå®š temperature + ç‰ˆæœ¬é”å®š |
| **æ•°æ®æ³„éœ²** | éšç§é£é™© | æœ¬åœ°æ¨¡å‹ + æ•æ„Ÿæ•°æ®è„±æ• |

---

## 5. å®æ–½è·¯çº¿å»ºè®®

### Phase 1: åŸºç¡€ç ”ç©¶ (2-3d)
- [ ] å¤šæ¨¡å‹è¯„å®¡ PoCï¼ˆ2-3 ä¸ªæ¨¡å‹å¯¹æ¯”ï¼‰
- [ ] æˆæœ¬æµ‹ç®—ï¼ˆAPI vs æœ¬åœ°æ¨¡å‹ï¼‰
- [ ] ä¸ç°æœ‰ Evidence æ ¼å¼å…¼å®¹æ€§éªŒè¯

### Phase 2: MVP é›†æˆ (3-5d)
- [ ] `AIReviewEngine` æ ¸å¿ƒå®ç°
- [ ] Policy é…ç½®æ‰©å±•
- [ ] åŸºç¡€å®¡è®¡å­—æ®µè®°å½•

### Phase 3: ç”Ÿäº§åŒ– (5-7d)
- [ ] æœ¬åœ°æ¨¡å‹æ”¯æŒ (vLLM)
- [ ] ç¼“å­˜ä¸æ€§èƒ½ä¼˜åŒ–
- [ ] å¯è§†åŒ–ç•Œé¢ï¼ˆDashboard é›†æˆï¼‰

---

## 6. å†³ç­–ç‚¹ï¼ˆå¾…è®¨è®ºï¼‰

| å†³ç­–é¡¹ | é€‰é¡¹ | å»ºè®® |
|--------|------|------|
| é¦–ç‰ˆæ¨¡å‹æ”¯æŒ | OpenAI Only / Multi-vendor / Local | Multi-vendorï¼ˆè‡³å°‘ 2 å®¶ï¼‰|
| é»˜è®¤å¯ç”¨ | Yes / No | **No**ï¼ˆæ˜¾å¼ opt-inï¼‰|
| å¤±è´¥ç­–ç•¥ | Block / Warn / Ignore | **Warn**ï¼ˆæ¸è¿›å¼é‡‡ç”¨ï¼‰|
| æˆæœ¬ä¸Šé™ | ç¡¬é™åˆ¶ / è½¯å‘Šè­¦ | ç¡¬é™åˆ¶ï¼ˆç»§æ‰¿ BudgetGovernanceï¼‰|

---

## é™„å½•ï¼šå‚è€ƒèµ„æº

1. [OpenAI Evals](https://github.com/openai/evals) - è¯„ä¼°æ¡†æ¶è®¾è®¡
2. [DeepEval](https://github.com/confident-ai/deepeval) - LLM è¯„ä¼°å¼€æºå·¥å…·
3. [TruLens](https://github.com/truera/trulens) - LLM å¯è§£é‡Šæ€§
4. [LangSmith](https://smith.langchain.com/) - è¿½è¸ªä¸è¯„ä¼°å¹³å°

---

*æœ¬æ–‡æ¡£ä¸ºé¢„ç ”æ€§è´¨ï¼Œå…·ä½“å®ç°éœ€ç»æ¶æ„å¸ˆè¯„å®¡å’Œ PM æ‰¹å‡†ã€‚*
